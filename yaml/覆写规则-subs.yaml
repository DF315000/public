# DNSé…ç½®ï¼ˆé€šç”¨æ ¼å¼ï¼‰
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:private_domain,cn_domain"
    - "+.services.googleapis.cn"
    - "+.xn--ngstr-lra8j.com"
    - "time.*.com"

  default-nameserver:
    - 223.5.5.5  # é˜¿é‡ŒDNS
    - 119.29.29.29  # è…¾è®¯DNS
    - 114.114.114.114  # 114DNS

  nameserver:
    - 223.5.5.5  # é˜¿é‡ŒDNS
    - 119.29.29.29  # è…¾è®¯DNS
    - 114.114.114.114  # 114DNS
  
  proxy-server-nameserver:
    - 114.114.114.114  # 114DNS
    - 119.29.29.29  # è…¾è®¯DNS
    - 8.8.8.8  # Google
    - 1.1.1.1  # Cloudflare
  
  fallback:
    - 114.114.114.114  # 114DNS
    - 119.29.29.29  # è…¾è®¯DNS
    - 8.8.8.8  # Google
    - 1.1.1.1  # Cloudflare

# å‡ºç«™ç­–ç•¥
# æ³¨æ„é”šç‚¹å¿…é¡»æ”¾åœ¨å¼•ç”¨çš„ä¸Šæ–¹ï¼Œå¯ä»¥é›†ä¸­æŠŠé”šç‚¹å…¨éƒ¨æ”¾yamlçš„é¡¶éƒ¨ã€‚
pr: &pr {type: select, proxies: [ğŸš€ é»˜è®¤ä»£ç†, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ äºšå¤ªå‡è¡¡, â™»ï¸ ä½å€è‡ªåŠ¨, ğŸ”¯ ä½å€å‡è¡¡, ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨, ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨, ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨, ğŸ“¹ YouTubeè‡ªåŠ¨, ğŸ“¹ YouTubeå‡è¡¡, ğŸ¤– AIè‡ªåŠ¨, ğŸ¤– AIå‡è¡¡, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]}

proxy-groups:
  - {name: ğŸš€ é»˜è®¤ä»£ç†, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ”¯ äºšå¤ªå‡è¡¡, â™»ï¸ ä½å€è‡ªåŠ¨, ğŸ”¯ ä½å€å‡è¡¡, ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨, ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨, ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨, ğŸ“¹ YouTubeè‡ªåŠ¨, ğŸ“¹ YouTubeå‡è¡¡, ğŸ¤– AIè‡ªåŠ¨, ğŸ¤– AIå‡è¡¡, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, DIRECT]}
  - {name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true}
  
  - {name: ğŸ“¹ YouTube, <<: *pr}
  - {name: ğŸ¤– AI, <<: *pr}
  - {name: ğŸ“² Telegram, <<: *pr}
  - {name: ğŸ¬ OneDrive, <<: *pr}
  - {name: ğŸ Apple, <<: *pr}
  - {name: ğŸªŸ Microsoft, <<: *pr}
  
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(69äº‘|å®˜ç½‘|èŠ‚ç‚¹|æµé‡|å¥—é¤|é‡ç½®|ç›´è¿|DIRECT|direct|0.5|0.5å€|0.5x|0.2|0.2å€|0.2x|0.1|0.1å€|0.1x|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x|5.0|5å€|5x)).)*$"}
  - {name: ğŸ”¯ äºšå¤ªå‡è¡¡, type: load-balance, include-all: true, interval: 300, strategy: sticky-sessions, filter: "(?=.*(æ¸¯|HK|(?i)Hong|æ–°|SG|(?i)Singapore|æ—¥|JP|(?i)Japan|å°|TW|(?i)Taiwan|éŸ©|KR|(?i)Korea|ç¾|US|(?i)States|America))^((?!.*(69äº‘|compatible|cmpatibal|å…¼å®¹|ä¸èƒ½|å®˜ç½‘|èŠ‚ç‚¹|æµé‡|å¥—é¤|ç›´è¿|DIRECT|direct|å°¼æ—¥åˆ©äºš|0.5|0.5å€|0.5x|0.2|0.2å€|0.2x|0.1|0.1å€|0.1x|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x|5.0|5å€|5x)).)*$"}
  - {name: â™»ï¸ ä½å€è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(sub|0.5|0.5å€|0.5x|0.2|0.2å€|0.2x|0.1|0.1å€|0.1x))^((?!.*(69äº‘|å®˜ç½‘|èŠ‚ç‚¹|æµé‡|å¥—é¤|é‡ç½®|ç›´è¿|DIRECT|direct|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x|5.0|5å€|5x)).)*$"}
  - {name: ğŸ”¯ ä½å€å‡è¡¡, type: load-balance, include-all: true, interval: 300, strategy: sticky-sessions, filter: "(?=.*(sub|0.5|0.5å€|0.5x|0.2|0.2å€|0.2x|0.1|0.1å€|0.1x))^((?!.*(69äº‘|å®˜ç½‘|èŠ‚ç‚¹|æµé‡|å¥—é¤|é‡ç½®|ç›´è¿|DIRECT|direct|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x|5.0|5å€|5x)).)*$"}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(69äº‘|sub|å°|æ—¥|éŸ©|æ–°|æ·±|ç¾|å®˜ç½‘|èŠ‚ç‚¹|æµé‡|å¥—é¤|ç›´è¿|DIRECT|direct|å°¼æ—¥åˆ©äºš|0.5|0.5å€|0.5x|0.2|0.2å€|0.2x|0.1|0.1å€|0.1x|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x|5.0|5å€|5x)).)*$"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥|JP|(?i)Japan))^((?!(69äº‘|sub|æ¸¯|å°|éŸ©|æ–°|ç¾|å®˜ç½‘|èŠ‚ç‚¹|æµé‡|å¥—é¤|é‡ç½®|ç›´è¿|DIRECT|direct|å°¼æ—¥åˆ©äºš|0.5|0.5å€|0.5x|0.2|0.2å€|0.2x|0.1|0.1å€|0.1x|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x|5.0|5å€|5x)).)*$"}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ–°|SG|(?i)Singapore))^((?!(69äº‘|sub|æ¸¯|å°|æ—¥|éŸ©|ç¾|å®˜ç½‘|èŠ‚ç‚¹|æµé‡|å¥—é¤|ç›´è¿|DIRECT|direct|å°¼æ—¥åˆ©äºš|0.5|0.5å€|0.5x|0.2|0.2å€|0.2x|0.1|0.1å€|0.1x|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x|5.0|5å€|5x)).)*$"}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(69äº‘|sub|æ¸¯|å°|æ—¥|éŸ©|æ–°|å®˜ç½‘|èŠ‚ç‚¹|æµé‡|å¥—é¤|ç›´è¿|DIRECT|direct|å°¼æ—¥åˆ©äºš|0.5|0.5å€|0.5x|0.2|0.2å€|0.2x|0.1|0.1å€|0.1x|2.0|2å€|2x|3.0|3å€|3x|4.0|4å€|4x|5.0|5å€|5x)).)*$"}
  - {name: ğŸ“¹ YouTubeè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(Youtube|youtube))^((?!.*(compatible|cmpatibal|å…¼å®¹|ä¸èƒ½|å®˜ç½‘|ç›´è¿|direct|DIRECT)).)*$"}
  - {name: ğŸ“¹ YouTubeå‡è¡¡, type: load-balance, include-all: true, interval: 300, strategy: sticky-sessions, filter: "(?=.*(Youtube|youtube))^((?!.*(compatible|cmpatibal|å…¼å®¹|ä¸èƒ½|å®˜ç½‘|ç›´è¿|direct|DIRECT)).)*$"}
  - {name: ğŸ¤– AIè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(Openai|openai))^((?!.*(compatible|cmpatibal|å…¼å®¹|ä¸èƒ½|å®˜ç½‘|ç›´è¿|direct|DIRECT)).)*$"}
  - {name: ğŸ¤– AIå‡è¡¡, type: load-balance, include-all: true, interval: 300, strategy: sticky-sessions, filter: "(?=.*(Openai|openai))^((?!.*(compatible|cmpatibal|å…¼å®¹|ä¸èƒ½|å®˜ç½‘|ç›´è¿|direct|DIRECT)).)*$"}

# è§„åˆ™åŒ¹é…
# æ­¤è§„åˆ™éƒ¨åˆ†æ²¡æœ‰åšé˜²æ³„éœ²å¤„ç†ï¼Œå› ä¸ºå¼Šä¸¥é‡å¤§äºåˆ©ï¼
rules:
  #è‡ªå®šä¹‰è§„åˆ™é›†
  - RULE-SET,private_direct_list,DIRECT
  - RULE-SET,private_proxy_list,ğŸš€ é»˜è®¤ä»£ç†
  #å›½å†…ç½‘ç«™
  - RULE-SET,DouYin,DIRECT
  - RULE-SET,WeChat,DIRECT
  - RULE-SET,BiliBili,DIRECT
  - RULE-SET,ChinaMedia,DIRECT
  #å›½é™…å…¬å¸å›½å†…æœåŠ¡ 
  - RULE-SET,Bing,ğŸªŸ Microsoft
  - RULE-SET,OneDrive,ğŸ¬ OneDrive
  - RULE-SET,Microsoft,ğŸªŸ Microsoft
  - RULE-SET,Apple,ğŸ Apple
  #å›½é™…ai
  - RULE-SET,OpenAI,ğŸ¤– AI
  - RULE-SET,Gemini,ğŸ¤– AI
  - RULE-SET,Claude,ğŸ¤– AI
  - RULE-SET,Copilot,ğŸ¤– AI
  - RULE-SET,self-ai,ğŸ¤– AI
  #æŒ‡å®šç½‘ç«™
  - RULE-SET,Telegram,ğŸ“² Telegram
  - RULE-SET,telegram_ip,ğŸ“² Telegram,no-resolve
  - RULE-SET,Speedtest,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Google,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,google_ip,ğŸš€ é»˜è®¤ä»£ç†,no-resolve
  - RULE-SET,GitHub,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Instagram,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Twitter,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,Facebook,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,PayPal,ğŸš€ é»˜è®¤ä»£ç†
  #å›½é™…åª’ä½“
  - RULE-SET,YouTube,ğŸ“¹ YouTube
  - RULE-SET,GlobalMedia,ğŸ“¹ YouTube
  #å…¶ä»–è§„åˆ™é›†
  - RULE-SET,Proxy_Classical,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,ChinaIPs,DIRECT
  - RULE-SET,ChinaMaxNoMedia,DIRECT
#  - RULE-SET,proxy,ğŸš€ é»˜è®¤ä»£ç†
#  - RULE-SET,gfw,ğŸš€ é»˜è®¤ä»£ç†
#  - RULE-SET,Global_Classical,ğŸš€ é»˜è®¤ä»£ç†
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# è§„åˆ™é›†
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
  # YAML æ ¼å¼é”šç‚¹
  yaml: &yaml {type: http, interval: 86400, behavior: classical, format: yaml}
  yaml_ip: &yaml_ip {type: http, interval: 86400, behavior: ipcidr, format: yaml}
  yaml_domain: &yaml_domain {type: http, interval: 86400, behavior: domain, format: yaml}

rule-providers: 
  #è‡ªå®šä¹‰è§„åˆ™é›†
  private_direct_list: { <<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/DF315000/public/refs/heads/main/list/direct.list"}
  private_proxy_list: { <<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/DF315000/public/refs/heads/main/list/proxy.list"}
  #å›½å†…ç½‘ç«™
  DouYin: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/DouYin/DouYin.yaml"}
  WeChat: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.yaml"}
  BiliBili: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml"}
  ChinaMedia: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.yaml"}
  #å›½é™…å…¬å¸å›½å†…æœåŠ¡
  Bing: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.yaml"}
  OneDrive: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.yaml"}
  Microsoft: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml"}
  Apple: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml"}
  #å›½é™…ai
  OpenAI: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml"}
  Gemini: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml"}
  Claude: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml"}
  self-ai: { <<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/DF315000/public/refs/heads/main/list/AI.list"}
  Copilot: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml"}  
  #æŒ‡å®šç½‘ç«™
  Telegram: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml"}
  telegram_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"}
  Speedtest: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Speedtest/Speedtest.yaml"}
  Google: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml"}
  google_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"}
  GitHub: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml"}
  PayPal: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml"}
  Instagram: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Instagram/Instagram.yaml"}
  Twitter: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml"}
  Facebook: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Facebook/Facebook.yaml"}

  #å›½é™…åª’ä½“
  YouTube: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml"}
  GlobalMedia: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml"}
  #Netflix: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml"} #Netflix (çº¯åŸŸåç±»å‹)
  #netflix_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs"} #Netflix IPè§„åˆ™é›†
  #TikTok: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml"} #TikTok

  # å…¶ä»–è§„åˆ™é›†
  ChinaIPs: { <<: *yaml_ip, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs_IP.yaml"}
  ChinaMaxNoMedia: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMaxNoMedia/ChinaMaxNoMedia_Classical.yaml"}
  proxy: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/proxy.mrs"}
  gfw: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs"}
  Proxy_Classical: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Proxy/Proxy_Classical.yaml"}
  #Global_Classical: { <<: *yaml, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Classical.yaml"}
